<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sentiment Analyzer</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="container">
        <div class="neural-pattern">
            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="20" cy="20" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="50" cy="15" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="80" cy="25" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="30" cy="50" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="70" cy="55" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="25" cy="80" r="3" fill="currentColor" opacity="0.6"/>
                <circle cx="60" cy="85" r="3" fill="currentColor" opacity="0.6"/>
                <line x1="20" y1="20" x2="50" y2="15" stroke="currentColor" opacity="0.3" stroke-width="1"/>
                <line x1="50" y1="15" x2="80" y2="25" stroke="currentColor" opacity="0.3" stroke-width="1"/>
                <line x1="20" y1="20" x2="30" y2="50" stroke="currentColor" opacity="0.3" stroke-width="1"/>
                <line x1="80" y1="25" x2="70" y2="55" stroke="currentColor" opacity="0.3" stroke-width="1"/>
                <line x1="30" y1="50" x2="25" y2="80" stroke="currentColor" opacity="0.3" stroke-width="1"/>
                <line x1="70" y1="55" x2="60" y2="85" stroke="currentColor" opacity="0.3" stroke-width="1"/>
            </svg>
        </div>

        <div class="header">
            <h1>‚ú® AI Sentiment Analyzer</h1>
            <div class="ai-badge">Developed By Abhishek M</div>
            <p class="subtitle">Decode emotions with artificial intelligence</p>
        </div>

        <form id="sentimentForm">
            <div class="input-group">
                <label for="sentence">Enter your text:</label>
                <textarea 
                    id="sentence" 
                    name="sentence" 
                    placeholder="Share your thoughts, feelings, or any text..."
                    required
                ></textarea>
            </div>

            <button type="submit" class="btn" id="analyzeBtn">
                Analyze Sentiment
            </button>
        </form>

        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p>Processing neural patterns...</p>
        </div>

        <div class="result-container" id="resultContainer">
            <div class="emoji" id="emoji"></div>
            <div class="result-title" id="resultTitle"></div>
            <div class="confidence" id="confidence"></div>
            <div class="analyzed-text" id="analyzedText"></div>
        </div>
    </div>

    <script>
        const form = document.getElementById('sentimentForm');
        const loader = document.getElementById('loader');
        const resultContainer = document.getElementById('resultContainer');
        const analyzeBtn = document.getElementById('analyzeBtn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const sentence = document.getElementById('sentence').value.trim();

            if (!sentence) {
                showResult('error', 'Error', 'Please enter some text to analyze.', '', '‚ùå');
                return;
            }

            loader.style.display = 'block';
            resultContainer.style.display = 'none';
            analyzeBtn.disabled = true;

            try {
                const formData = new FormData();
                formData.append('sentence', sentence);

                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                loader.style.display = 'none';
                analyzeBtn.disabled = false;

                if (data.success) {
                    const sentiment = data.prediction.toLowerCase();
                    let emoji = '';
                    
                    if (sentiment === 'positive') {
                        emoji = 'üòä';
                    } else if (sentiment === 'negative') {
                        emoji = 'üòû';
                    } else {
                        emoji = 'üòê';
                    }

                    showResult(
                        sentiment,
                        data.prediction,
                        `Confidence: ${data.confidence}`,
                        `"${data.details.sentence}"`,
                        emoji
                    );
                } else {
                    showResult('error', 'Error', data.error, '', '‚ùå');
                }
            } catch (error) {
                loader.style.display = 'none';
                analyzeBtn.disabled = false;
                showResult('error', 'Error', 'Failed to connect to the server. Please try again.', '', '‚ùå');
            }
        });

        function showResult(type, title, confidence, text, emoji) {
            resultContainer.className = 'result-container ' + type;
            document.getElementById('emoji').textContent = emoji;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('confidence').textContent = confidence;
            document.getElementById('analyzedText').textContent = text;
            resultContainer.style.display = 'block';
        }
    </script>
</body>
</html>